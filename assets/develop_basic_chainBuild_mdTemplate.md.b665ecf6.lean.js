import{_ as a,o as n,c as l,S as p}from"./chunks/framework.2ada2e54.js";const i=JSON.parse('{"title":"Markdown 模版消息","description":"","frontmatter":{},"headers":[],"relativePath":"develop/basic/chainBuild/mdTemplate.md","filePath":"develop/basic/chainBuild/mdTemplate.md","lastUpdated":1752828192000}'),o={name:"develop/basic/chainBuild/mdTemplate.md"};function t(e,s,r,F,c,D){return n(),l("div",null,s[0]||(s[0]=[p(`<h1 id="markdown-模版消息" tabindex="-1">Markdown 模版消息 <a class="header-anchor" href="#markdown-模版消息" aria-label="Permalink to &quot;Markdown 模版消息&quot;">​</a></h1><p>发送 QQ 频道 Markdown 模板消息，详情请查看<a href="https://bot.q.qq.com/wiki/develop/api/openapi/message/post_markdown_messages.html" target="_blank" rel="noreferrer">发送 markdown 消息</a>。</p><h2 id="chain-markdown-template" tabindex="-1">Chain().markdown_template() <a class="header-anchor" href="#chain-markdown-template" aria-label="Permalink to &quot;Chain().markdown_template()&quot;">​</a></h2><table><thead><tr><th>参数名</th><th>类型</th><th>释义</th><th>默认值</th></tr></thead><tbody><tr><td>template_id</td><td>str</td><td>模版 ID</td><td></td></tr><tr><td>params</td><td>List[dict]</td><td>模版 key-value 数据</td><td></td></tr><tr><td>keyboard</td><td>InlineKeyboard</td><td>按钮消息（自定义）</td><td></td></tr><tr><td>keyboard_template_id</td><td>str</td><td>按钮消息（模版）</td><td></td></tr></tbody></table><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">params </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">para1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">values</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">段落1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]},</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">para2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">values</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">段落2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]},</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">desc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">values</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">简介</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]},</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">Chain</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">at</span><span style="color:#89DDFF;">=False).</span><span style="color:#82AAFF;">markdown_template</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">101993071_1658748972</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> params</span><span style="color:#89DDFF;">)</span></span></code></pre></div><h2 id="按钮消息" tabindex="-1">按钮消息 <a class="header-anchor" href="#按钮消息" aria-label="Permalink to &quot;按钮消息&quot;">​</a></h2><p><a href="https://bot.q.qq.com/wiki/develop/api/openapi/message/post_keyboard_messages.html" target="_blank" rel="noreferrer">发送含有消息按钮组件的消息</a></p><h3 id="使用按钮模版" tabindex="-1">使用按钮模版 <a class="header-anchor" href="#使用按钮模版" aria-label="Permalink to &quot;使用按钮模版&quot;">​</a></h3><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight has-highlighted-lines"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 必须跟随 md 模版发送</span></span>
<span class="line"><span style="color:#82AAFF;">Chain</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">at</span><span style="color:#89DDFF;">=False).</span><span style="color:#82AAFF;">markdown_template</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">101993071_1658748972</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line highlighted"><span style="color:#82AAFF;">    params</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#BABED8;font-style:italic;">keyboard_template_id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">102005657_1703561314</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span></code></pre></div><h3 id="自定义按钮" tabindex="-1">自定义按钮 <a class="header-anchor" href="#自定义按钮" aria-label="Permalink to &quot;自定义按钮&quot;">​</a></h3><p>自定义按钮通过内置的 InlineKeyboard 类构建。</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> amiyabot </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> InlineKeyboard</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">bot</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on_message</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">keywords</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">def</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">_</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">data</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> Message</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">    keyboard </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">InlineKeyboard</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">appid</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;"># 添加第一行按钮组</span></span>
<span class="line"><span style="color:#BABED8;">    row </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> keyboard</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_row</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    row</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_button</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">按钮1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    row</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_button</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">按钮2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;"># 添加第二行按钮组</span></span>
<span class="line"><span style="color:#BABED8;">    row2 </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> keyboard</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_row</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    row2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_button</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">按钮3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    row2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_button</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">4</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">更多功能...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">action_type</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;"># 必须跟随 md 模版发送</span></span>
<span class="line"><span style="color:#BABED8;">    chain </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Chain</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">at</span><span style="color:#89DDFF;">=False).</span><span style="color:#82AAFF;">markdown_template</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">102005657_1704356453</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">[{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">values</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Markdown 测试</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]}],</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#BABED8;font-style:italic;">keyboard</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">keyboard</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;"># 通过主动消息发送</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#BABED8;"> bot</span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">instance</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">appid</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">send_message</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">chain</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#BABED8;font-style:italic;">channel_id</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">channel_id</span><span style="color:#89DDFF;">)</span></span></code></pre></div>`,12)]))}const d=a(o,[["render",t]]);export{i as __pageData,d as default};
